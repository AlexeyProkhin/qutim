qutim_add_plugin( urihandler
	DISPLAY_NAME "UriHandler"
	DESCRIPTION "Allows qutIM to open link of some types."
)

FILE(GLOB PLUGINS RELATIVE "${CMAKE_CURRENT_SOURCE_DIR}/subplugins" "${CMAKE_CURRENT_SOURCE_DIR}/subplugins/*")

FOREACH(PLUGIN ${PLUGINS})
	IF(IS_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/subplugins/${PLUGIN}" AND EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/subplugins/${PLUGIN}/CMakeLists.txt")
		STRING(TOUPPER WININT_${PLUGIN} PLUGIN_NAME)
		ADD_SUBDIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/subplugins/${PLUGIN} ${CMAKE_CURRENT_BINARY_DIR}/subplugins/${PLUGIN})
	ENDIF()
ENDFOREACH()
